<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
		<head>
			<!-- template designed by Marco Von Ballmoos -->
			<title>Guide</title>
			<link rel="stylesheet" href="../media/stylesheet.css" />
			<meta http-equiv='Content-Type' content='text/html; charset=iso-8859-1'/>
		</head>
		<body>
			<div class="page-body">			
	<table class="tutorial-nav-box">
	<tr>
		<td style="width: 30%">
							<a href="../RestAuth/tutorial_installation-on-debian-ubuntu.pkg.html" class="nav-button">Previous</a>
					</td>
		<td style="text-align: center">
							<a href="../RestAuth/tutorial_RestAuth.pkg.html" class="nav-button">Up</a>
					</td>
		<td style="text-align: right; width: 30%">
							<a href="../RestAuth/tutorial_contribute.pkg.html" class="nav-button">Next</a>
					</td>
	</tr>
	<tr>
		<td style="width: 30%">
							<span class="detail">Installation on Debian/Ubuntu</span>
					</td>
		<td style="text-align: center">
							<span class="detail">Documentation</span>
					</td>
		<td style="text-align: right; width: 30%">
							<span class="detail">Contribute</span>
					</td>
	</tr>
</table>
	
<div><a name=""></a><div class="ref-title-box"><h1 class="ref-title">Guide</h1>
  <h2 class="ref-purpose">The definitive guide to using php-restauth</h2></div>
 <div class="ref-synopsis"><span class="author">Mathias Ertl
   <div class="author-blurb"><a href="mailto:mati@restauth.net">mati@restauth.net</a></div></span></div>
 <span><a name="intro"></a><p><em>php-restauth</em> handles very similar to the Python reference
   implementation, <a href="https://python.restauth.net">RestAuthClient</a>.</p>
  <p><ul><li>A <a href="../RestAuth/RestAuthConnection.html">RestAuthConnection</a> instance represents a connection to a RestAuth service.</li>
    <li><a href="../RestAuth/RestAuthUser.html">RestAuthUser</a> and <a href="../RestAuth/RestAuthGroup.html">RestAuthGroup</a> instances represent remote users and groups.
      You can create such instances either by
     <ul><li>calling a factory method (to be sure the item exists remotely)</li>
      <li>directly instantiating it (saving one call to the RestAuth service)</li></ul></li>
    <li>All exceptions thrown by this library are subclasses of <a href="../RestAuth/RestAuthException.html">RestAuthException</a>, allowing you
     to handle errors as finely grained as you wish.</li></ul></p>
  <p>The following example should give you a very good idea of how the library works:</p>
  <p><div class="src-code"><ol><li><div class="src-line"><span class="src-php">&lt;?php</span></div></li>
<li><div class="src-line">&nbsp;</div></li>
<li><div class="src-line"><span class="src-comm">//&nbsp;NOTE:&nbsp;that&nbsp;all&nbsp;error&nbsp;handling&nbsp;in&nbsp;this&nbsp;example&nbsp;is&nbsp;skipped&nbsp;for&nbsp;the&nbsp;sake&nbsp;of</span></div></li>
<li><div class="src-line"><span class="src-comm">//&nbsp;clarity.</span></div></li>
<li><div class="src-line">&nbsp;</div></li>
<li><div class="src-line"><span class="src-inc">require_once</span><span class="src-sym">(</span><span class="src-str">'RestAuth/restauth.php'</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&nbsp;</div></li>
<li><div class="src-line"><span class="src-var">$conn&nbsp;</span>=&nbsp;<span class="src-key">new&nbsp;</span><span class="src-id"><a href="../RestAuth/RestAuthConnection.html">RestAuthConnection</a></span><span class="src-sym">(</span><span class="src-str">'http://[::1]:8000'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'vowi'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'vowi'</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&nbsp;</div></li>
<li><div class="src-line"><span class="src-comm">//&nbsp;create&nbsp;a&nbsp;*new*&nbsp;user&nbsp;named&nbsp;'foobar',&nbsp;and&nbsp;do&nbsp;some&nbsp;interesting&nbsp;things:</span></div></li>
<li><div class="src-line"><span class="src-var">$user&nbsp;</span>=&nbsp;<span class="src-id"><a href="../RestAuth/RestAuthUser.html">RestAuthUser</a></span><span class="src-sym">::</span><a href="../RestAuth/RestAuthUser.html#methodcreate">create</a><span class="src-sym">(</span><span class="src-var">$conn</span><span class="src-sym">,&nbsp;</span><span class="src-str">'foobar'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'somepassword'</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><span class="src-key">if&nbsp;</span><span class="src-sym">(</span><span class="src-var">$user</span><span class="src-sym">-&gt;</span><span class="src-id">verifyPassword</span><span class="src-sym">(</span><span class="src-str">'somepassword'</span><span class="src-sym">))&nbsp;</span><span class="src-sym">{</span></div></li>
<li><div class="src-line">&nbsp;&nbsp;&nbsp;&nbsp;print<span class="src-sym">(</span><span class="src-str">&quot;User&nbsp;has&nbsp;password&nbsp;'somepassword'.\n&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><span class="src-sym">}&nbsp;</span><span class="src-key">else&nbsp;</span><span class="src-sym">{</span></div></li>
<li><div class="src-line">&nbsp;&nbsp;&nbsp;&nbsp;print<span class="src-sym">(</span><span class="src-str">&quot;User&nbsp;seems&nbsp;to&nbsp;have&nbsp;a&nbsp;different&nbsp;password.\n&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><span class="src-sym">}</span></div></li>
<li><div class="src-line">&nbsp;</div></li>
<li><div class="src-line"><span class="src-comm">//&nbsp;set&nbsp;a&nbsp;property&nbsp;of&nbsp;that&nbsp;user:</span></div></li>
<li><div class="src-line"><span class="src-var">$user</span><span class="src-sym">-&gt;</span><span class="src-id">setProperty</span><span class="src-sym">(</span><span class="src-str">'mykey'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'myvalue'</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&nbsp;</div></li>
<li><div class="src-line"><span class="src-comm">//&nbsp;retreive&nbsp;a&nbsp;single&nbsp;property:</span></div></li>
<li><div class="src-line">print<span class="src-sym">(</span><span class="src-str">&quot;property&nbsp;mykey&nbsp;has&nbsp;value&nbsp;'&quot;</span>.&nbsp;<span class="src-var">$user</span><span class="src-sym">-&gt;</span><span class="src-id">getProperty</span><span class="src-sym">(</span><span class="src-str">'mykey'</span><span class="src-sym">)&nbsp;</span>.&nbsp;<span class="src-str">&quot;'\n&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&nbsp;</div></li>
<li><div class="src-line"><span class="src-comm">//&nbsp;retreive&nbsp;all&nbsp;properties:</span></div></li>
<li><div class="src-line"><span class="src-var">$props&nbsp;</span>=&nbsp;<span class="src-var">$user</span><span class="src-sym">-&gt;</span><span class="src-id">getProperties</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">print<span class="src-sym">(</span><span class="src-str">&quot;...&nbsp;same&nbsp;when&nbsp;retreiving&nbsp;all&nbsp;properties:&nbsp;'&quot;&nbsp;</span>.&nbsp;<span class="src-var">$props</span><span class="src-sym">[</span><span class="src-str">'mykey'</span><span class="src-sym">]&nbsp;</span>.&nbsp;<span class="src-str">&quot;'\n&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&nbsp;</div></li>
<li><div class="src-line"><span class="src-comm">//&nbsp;If&nbsp;performance&nbsp;is&nbsp;critical,&nbsp;do&nbsp;not&nbsp;use&nbsp;the&nbsp;factory&nbsp;methods&nbsp;to&nbsp;get&nbsp;user</span></div></li>
<li><div class="src-line"><span class="src-comm">//&nbsp;objects,&nbsp;instead&nbsp;reference&nbsp;them&nbsp;directly:</span></div></li>
<li><div class="src-line"><span class="src-var">$user&nbsp;</span>=&nbsp;<span class="src-key">new&nbsp;</span><span class="src-id"><a href="../RestAuth/RestAuthUser.html">RestAuthUser</a></span><span class="src-sym">(</span><span class="src-var">$conn</span><span class="src-sym">,&nbsp;</span><span class="src-str">'foobar'</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><span class="src-comm">//&nbsp;there&nbsp;is&nbsp;no&nbsp;guarantee&nbsp;here&nbsp;that&nbsp;this&nbsp;object&nbsp;exists:</span></div></li>
<li><div class="src-line"><span class="src-var">$user</span><span class="src-sym">-&gt;</span><span class="src-id">verifyPassword</span><span class="src-sym">(</span><span class="src-str">'somepassword'</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span></div></li>
<li><div class="src-line">&nbsp;</div></li>
<li><div class="src-line"><span class="src-comm">//&nbsp;Groups&nbsp;work&nbsp;in&nbsp;much&nbsp;the&nbsp;same&nbsp;way&nbsp;as&nbsp;users:</span></div></li>
<li><div class="src-line"><span class="src-id"><a href="../RestAuth/RestAuthGroup.html">RestAuthGroup</a></span><span class="src-sym">::</span><a href="../RestAuth/RestAuthGroup.html#methodcreate">create</a><span class="src-sym">(</span><span class="src-var">$conn</span><span class="src-sym">,&nbsp;</span><span class="src-str">'groupname'</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span><span class="src-comm">//&nbsp;first&nbsp;create&nbsp;it...</span></div></li>
<li><div class="src-line">&nbsp;</div></li>
<li><div class="src-line"><span class="src-comm">//&nbsp;get&nbsp;verifies&nbsp;that&nbsp;the&nbsp;group&nbsp;exists:</span></div></li>
<li><div class="src-line"><span class="src-var">$group&nbsp;</span>=&nbsp;<span class="src-id"><a href="../RestAuth/RestAuthGroup.html">RestAuthGroup</a></span><span class="src-sym">::</span><a href="../RestAuth/RestAuthGroup.html#methodget">get</a><span class="src-sym">(</span><span class="src-var">$conn</span><span class="src-sym">,&nbsp;</span><span class="src-str">'groupname'</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span></div></li>
<li><div class="src-line"><span class="src-var">$group</span><span class="src-sym">-&gt;</span><span class="src-id">addUser</span><span class="src-sym">(</span><span class="src-var">$user</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span><span class="src-comm">//&nbsp;may&nbsp;also&nbsp;just&nbsp;be&nbsp;the&nbsp;username!</span></div></li>
<li><div class="src-line"><span class="src-var">$members&nbsp;</span>=&nbsp;<span class="src-var">$group</span><span class="src-sym">-&gt;</span><span class="src-id">getMembers</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span><span class="src-comm">//&nbsp;returns&nbsp;a&nbsp;list&nbsp;of&nbsp;RestAuthUser&nbsp;instances</span></div></li>
<li><div class="src-line">print<span class="src-sym">(</span><span class="src-str">&quot;Users:&nbsp;&quot;&nbsp;</span>.&nbsp;<a href="http://www.php.net/implode">implode</a><span class="src-sym">(</span><span class="src-str">',&nbsp;'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$members</span><span class="src-sym">)&nbsp;</span>.&nbsp;<span class="src-str">&quot;\n&quot;</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span></div></li>
<li><div class="src-line">&nbsp;</div></li>
<li><div class="src-line"><span class="src-comm">//&nbsp;finally,&nbsp;remove&nbsp;group&nbsp;and&nbsp;user&nbsp;so&nbsp;you&nbsp;can&nbsp;call&nbsp;this&nbsp;script&nbsp;multiple&nbsp;times</span></div></li>
<li><div class="src-line"><span class="src-var">$user</span><span class="src-sym">-&gt;</span><span class="src-id">remove</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><span class="src-var">$group</span><span class="src-sym">-&gt;</span><span class="src-id">remove</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&nbsp;</div></li>
<li><div class="src-line"><span class="src-php">?&gt;</span></div></li>
</ol></div></p></span>
 <span><a name="error_handling"></a><h2 class="title">Error handling</h2><p><em>php-restauth</em> features many custom exceptions and the library should not
   throw any exception that is not a subclass of <a href="../RestAuth/RestAuthException.html">RestAuthException</a>. This exception class
   has several child exception classes, that in turn may have child exceptions. This allows you
   to easily catch all exceptions and/or individually handle those of interest in this contest.</p>
  <p>The following code example should give you an idea of how this works:</p>
  <p><div class="src-code"><ol><li><div class="src-line"><span class="src-php">&lt;?php</span></div></li>
<li><div class="src-line"><span class="src-inc">require_once</span><span class="src-sym">(</span><span class="src-str">'RestAuth/restauth.php'</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&nbsp;</div></li>
<li><div class="src-line">try&nbsp;<span class="src-sym">{</span></div></li>
<li><div class="src-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-comm">//&nbsp;...&nbsp;some&nbsp;restauth&nbsp;related&nbsp;code...</span></div></li>
<li><div class="src-line"><span class="src-sym">}&nbsp;</span>catch&nbsp;<span class="src-sym">(</span><span class="src-id"><a href="../RestAuth/RestAuthUnauthorized.html">RestAuthUnauthorized</a>&nbsp;</span><span class="src-var">$e</span><span class="src-sym">)&nbsp;</span><span class="src-sym">{</span></div></li>
<li><div class="src-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-comm">//&nbsp;You&nbsp;try&nbsp;to&nbsp;use&nbsp;an&nbsp;invalid&nbsp;service&nbsp;username/password</span></div></li>
<li><div class="src-line"><span class="src-sym">}&nbsp;</span>catch&nbsp;<span class="src-sym">(</span><span class="src-id"><a href="../RestAuth/RestAuthBadResponse.html">RestAuthBadResponse</a>&nbsp;</span><span class="src-var">$e</span><span class="src-sym">)&nbsp;</span><span class="src-sym">{</span></div></li>
<li><div class="src-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-comm">//&nbsp;usually&nbsp;indicates&nbsp;a&nbsp;buggy&nbsp;implemenation</span></div></li>
<li><div class="src-line"><span class="src-sym">}&nbsp;</span>catch&nbsp;<span class="src-sym">(</span><span class="src-id"><a href="../RestAuth/RestAuthException.html">RestAuthException</a>&nbsp;</span><span class="src-var">$e</span><span class="src-sym">)&nbsp;</span><span class="src-sym">{</span></div></li>
<li><div class="src-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-comm">//&nbsp;catch&nbsp;all!</span></div></li>
<li><div class="src-line"><span class="src-sym">}</span></div></li>
<li><div class="src-line">&nbsp;</div></li>
<li><div class="src-line"><span class="src-php">?&gt;</span></div></li>
</ol></div></p></span></div>

	<table class="tutorial-nav-box">
	<tr>
		<td style="width: 30%">
							<a href="../RestAuth/tutorial_installation-on-debian-ubuntu.pkg.html" class="nav-button">Previous</a>
					</td>
		<td style="text-align: center">
							<a href="../RestAuth/tutorial_RestAuth.pkg.html" class="nav-button">Up</a>
					</td>
		<td style="text-align: right; width: 30%">
							<a href="../RestAuth/tutorial_contribute.pkg.html" class="nav-button">Next</a>
					</td>
	</tr>
	<tr>
		<td style="width: 30%">
							<span class="detail">Installation on Debian/Ubuntu</span>
					</td>
		<td style="text-align: center">
							<span class="detail">Documentation</span>
					</td>
		<td style="text-align: right; width: 30%">
							<span class="detail">Contribute</span>
					</td>
	</tr>
</table>
	
	<p class="notes" id="credit">
		Documentation generated on Fri, 23 Sep 2011 12:00:39 +0200 by <a href="http://www.phpdoc.org" target="_blank">phpDocumentor 1.4.3</a>
	</p>
	</div></body>
</html>